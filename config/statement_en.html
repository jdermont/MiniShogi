<div style="color:#000000;background-color:rgba(255, 255, 255, 0.5);padding:20px;margin-bottom:10px;text-align:left">
    This is a port of the board game <a href="https://en.wikipedia.org/wiki/Minishogi">Minishogi</a>, which is a small variant of <a href="https://en.wikipedia.org/wiki/Shogi">Shogi</a>.
    <br>Click <a href="https://github.com/jdermont/MiniShogi/">here</a> for the referee.
    <br>Shogi pieces are from <a href="https://lishogi.org/">Lishogi</a> and overall graphics inspired by Lishogi.<br>
</div>

<div id="statement_back" class="statement_back" style="display:none"></div>
<div class="statement-body">
    <!-- GOAL -->
    <div class="statement-section statement-goal">
        <h1>
            <span class="icon icon-goal">&nbsp;</span>
            <span>The Goal</span>
        </h1>
        <div class="statement-goal-content">
            The goal is to checkmate your opponent's king.
        </div>
    </div>
    <!-- RULES -->
    <div class="statement-section statement-rules">
        <h1>
            <span class="icon icon-rules">&nbsp;</span>
            <span>Rules</span>
        </h1>
        <div class="statement-rules-content">
            <strong>Grid: </strong><br> Game is played on a 5x5 board. There can be also pieces on the players' "hands".<br>
            Each player begins with a set of 6 pieces: King, Gold General, Silver General, Bishop, Rook and Pawn.<br>
            <strong>The board starting position:</strong>
            <p style="text-align: center; padding-top: 12px;"><img src="https://i.imgur.com/Lj7VLOi.png" style="height: 300px; width: auto;"></img></p><br>
            <ul>
                <li>Player 0(<strong style="color:#ff1d5c">red</strong>/black) has pieces at the bottom and Player 1(<strong style="color:#22a1e4">blue</strong>/white) has pieces at the top.</li>
                <li>For the <strong style="color:#ff1d5c">Player 0</strong>, at the bottom from left are: King, Gold General, Silver General, Bishop, Rook. Pawn is at the front of the King.</li>
                <li>For the <strong style="color:#22a1e4">Player 1</strong>, at the top from left are: Rook, Bishop, Silver General, Gold General, King. Pawn is at the front of the King.</li>
                <li>Black always goes first and white goes next.</li>
            </ul>

            <br>
            <strong>Movement: </strong><br>
            Each piece has its own movement:<br>
            <ul>
                <li><strong>King (王,K)</strong> moves one square in any direction (horizontally, vertically, or diagonally).</li>
                <li><strong>Rook (飛,R)</strong> moves as many squares as desired horizontally or vertically.</li>
                <li><strong>Bishop (角,B)</strong> moves as many squares as desired diagonally.</li>
                <li><strong>Gold General (金,G)</strong> moves one square in any direction: horizontally, vertically, or diagonally. Except it cannot move backward diagonally.</li>
                <li><strong>Silver General (銀,S)</strong> moves one square diagonally or one square forward.</li>
                <li><strong>Pawn (歩,P)</strong> moves one square forward.</li>
                <li><strong>Promoted Silver General (<span style="color: #ff0000;">金</span>,+S), Promoted Pawn (と,+P)</strong> move like Gold General.</li>
                <li><strong>Promoted Rook (Dragon,龍王,+R)</strong> has movements of Rook and King.</li>
                <li><strong>Promoted Bishop (Horse,龍馬,+B)</strong> has movements of Bishop and King.</li>
            </ul>

            <br>
            <strong>Promotion: </strong><br>
            Whenever a piece <strong>reaches, moves on, or moves out of</strong> its furthest rank (row) (rank 5 for black player and rank 1 for white player), it can be promoted. Promotions are optional except for pawn, it has to be promoted when it reaches the furthest rank.
            <ul>
                <li><strong>Rook</strong> promotes into <strong>Promoted Rook (Dragon)</strong>.</li>
                <li><strong>Bishop</strong> promotes into <strong>Promoted Bishop (Horse)</strong>.</li>
                <li><strong>Silver General</strong> promotes into <strong>Promoted Silver General</strong>.</li>
                <li><strong>Pawn</strong> promotes into <strong>Promoted Pawn</strong>.</li>
                <li><strong>King, Gold General</strong> cannot be promoted.</li>
            </ul>

            <br>
            <strong>Captures: </strong><br>
            When a player's piece goes into a square occupied by the opponent's piece, the opponent's piece is captured and goes <strong>unpromoted</strong> into the player's hand. In the subsequent turns, the player may choose to drop the piece onto the board under his control.

            <br><br>
            <strong>Drops: </strong><br>
            On any turn, instead of moving a piece on the board, a player may select a piece in his hand and place it <strong>unpromoted</strong> on any empty square on the board, under his control. There are some restrictions:
            <ul>
                <li><strong>Pawn</strong> cannot be placed onto its furthest rank (row).</li>
                <li><strong>Pawn</strong> cannot be placed onto file (column) that already contains player's unpromoted pawn.</li>
                <li><strong>Pawn</strong> cannot deliver checkmate in the same turn. But it can do so in the subsequent turns.</li>
                <li>Dropped piece on the furthest rank (row) doesn't get promoted in the same turn. But it may be promoted in the subsequent turns.</li>
            </ul>

            <br>
            <strong>Check, checkmate and stalemate:</strong><br>
            If player's king is under attack of opponent's piece and would be captured in the next turn, it is in <strong>check</strong>. The player must remove the check. If he cannot, then his king is <strong>checkmated</strong> and the player loses game.<br>
            If player's king isn't in <strong>check</strong>, but also the player doesn't have any legal move, then it is <strong>stalemate</strong>, and the player also loses game.

            <br><br>
            <strong>Threefold repetition and perpetual check: </strong><br>
            If the same position (the same board configuration, the same side to move, and the same pieces in hand) occurs for the third time (the repetitions need not to be consecutive), the game ends and the <strong style="color:#ff1d5c">Player 0</strong> loses. Except if a <strong>King</strong> is in check, then the checking player loses.
        </div>
    </div>

    <!-- EXPERT RULES -->
    <div class="statement-section statement-expertrules">
        <h1>
            <span class="icon icon-expertrules">&nbsp;</span>
            <span>Expert Rules</span>
        </h1>
        <div class="statement-expert-rules-content">
            <ul style="padding-bottom: 0;">
                <li>Game lasts at most <const>300</const> rounds. If no ending game condition occurs by then, the game is draw.</li>
                <li>In the settings you can select western type piece set. You can also select to show <a href="https://en.wikipedia.org/wiki/Shogi_notation#SFEN">sfen notation</a>.</li>
            </ul>
        </div>
    </div>

    <!-- Victory conditions -->
    <div class="statement-victory-conditions">
        <div class="icon victory"></div>
        <div class="blk">
            <div class="title">Victory Conditions</div>
            <div class="text">
                <ul style="padding-bottom: 0;">
                    <li>Deliver checkmate to your opponent's king.</li>
                    <li>Opponent doesn't have any legal moves in his turn (stalemate).</li>
                    <li>Opponent repeats position for 3rd time while giving check.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Lose conditions -->
    <div class="statement-lose-conditions">
        <div class="icon lose"></div>
        <div class="blk">
            <div class="title">Loss Conditions</div>
            <div class="text">
                <ul style="padding-bottom: 0;">
                    <li>Your king is checkmated.</li>
                    <li>You don't have any legal moves in your turn (stalemate).</li>
                    <li>You repeat position for 3rd time while giving check.</li>
                    <li>You timeout, crash or give unrecognizable output.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- PROTOCOL -->
    <div class="statement-section statement-protocol">
        <h1>
            <span class="icon icon-protocol">&nbsp;</span>
            <span>Game Input</span>
        </h1>

        <!-- Protocol block -->
        <div class="blk">
            <div class="title">Pieces notation</div>
            <div class="text">
                <span class="statement-lineno">First player</span>: <const>K</const> - King, <const>G</const> - Gold General, <const>S</const> - Silver General, <const>B</const> - Bishop, <const>R</const> - Rook, <const>P</const> - Pawn, <const>+S</const> - Promoted Silver General, <const>+B</const> - Promoted Bishop, <const>+R</const> - Promoted Rook, <const>+P</const> - Promoted Pawn
                <br>
                <span class="statement-lineno">Second player</span>: <const>k</const> - King, <const>g</const> - Gold General, <const>s</const> - Silver General, <const>b</const> - Bishop, <const>r</const> - Rook, <const>p</const> - Pawn, <const>+s</const> - Promoted Silver General, <const>+b</const> - Promoted Bishop, <const>+r</const> - Promoted Rook, <const>+p</const> - Promoted Pawn
                <br>
            </div>
        </div>

        <div class="blk">
            <div class="title">Initial input</div>
            <div class="text">
                <span class="statement-lineno">First line</span>: The id of the player(<var>id</var>), <const>0</const> - first player, <const>1</const> - second player
                <br>
                <span class="statement-lineno">Second line</span>: <var>boardSize</var>: the number of rows and columns on the board, always <const>5</const>.
            </div>
            <div class="title">Input for one game turn</div>
            <div class="text">
                <span class="statement-lineno"><var>boardSize</var> lines</span>: a string of characters representing one line of the board, top to bottom. (<const>.</const>: empty, <const>K</const>: first player king, <const>k</const>: second player king, and so on, see Pieces notation above).<br>
                <span class="statement-lineno">Next line</span>: First player's current hand, or <const>-</const> if he has no pieces in the hand. Examples: <const>-</const>, <const>G</const>, <const>BB</const><br>
                <span class="statement-lineno">Next line</span>: Second player's current hand, or <const>-</const> if he has no pieces in the hand. Examples: <const>-</const>, <const>g</const>, <const>bb</const><br>
                <span class="statement-lineno">Next line</span>: Last opponent's <var>action</var> or <const>none</const> if first turn of first player.<br>
                <span class="statement-lineno">Next line</span>: <var>actionCount</var> for the number of legal actions for this turn.<br>
                <span class="statement-lineno">Next <var>actionCount</var> lines</span>: a string representing a legal action.
                <br>
            </div>
        </div>

        <!-- Protocol block -->
        <div class="blk">
            <div class="title">Output</div>
            <div class="text">
                <span class="statement-lineno">A single line</span> containing the coordinates where you want to play. Or <const>random</const>.
                <ul>
                    <li>For the movement, it is <var>columnFrom rowFrom columnTo rowTo</var> with <const>+</const> for promotion. Examples: <const>4534</const>, <const>1425+</const></li>
                    <li>For the drop, it is <var>Piece * columnTo rowTo</var>. Examples: <const>G*33</const>, <const>p*24</const></li>
                    <li>Output piece notation is not case sensitive.</li>
                </ul>
                You can also print message after space following action. Example: <const>4534 Take this!</const>.
                <br>
            </div>
        </div>

        <!-- Protocol block -->
        <div class="blk">
            <div class="title">Constraints</div>
            Response time first turn is ≤
            <const>1000</const> ms.
            <br>Response time per turn is ≤
            <const>100</const> ms.
        </div>
    </div>
</div>
